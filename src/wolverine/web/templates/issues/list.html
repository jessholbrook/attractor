{% extends "base.html" %}

{% block title %}Issues - Wolverine{% endblock %}

{% block content %}
<h1 class="text-2xl font-bold mb-6">Issues</h1>

<!-- Status filter links -->
<div class="flex gap-2 mb-4">
    <a href="/issues" class="px-3 py-1 rounded text-sm {% if not status_filter %}bg-gray-900 text-white{% else %}bg-gray-200 text-gray-700 hover:bg-gray-300{% endif %}">All</a>
    <a href="/issues?status=new" class="px-3 py-1 rounded text-sm {% if status_filter == 'new' %}bg-gray-900 text-white{% else %}bg-gray-200 text-gray-700 hover:bg-gray-300{% endif %}">New</a>
    <a href="/issues?status=triaged" class="px-3 py-1 rounded text-sm {% if status_filter == 'triaged' %}bg-gray-900 text-white{% else %}bg-gray-200 text-gray-700 hover:bg-gray-300{% endif %}">Triaged</a>
    <a href="/issues?status=diagnosing" class="px-3 py-1 rounded text-sm {% if status_filter == 'diagnosing' %}bg-gray-900 text-white{% else %}bg-gray-200 text-gray-700 hover:bg-gray-300{% endif %}">Diagnosing</a>
    <a href="/issues?status=healing" class="px-3 py-1 rounded text-sm {% if status_filter == 'healing' %}bg-gray-900 text-white{% else %}bg-gray-200 text-gray-700 hover:bg-gray-300{% endif %}">Healing</a>
    <a href="/issues?status=closed" class="px-3 py-1 rounded text-sm {% if status_filter == 'closed' %}bg-gray-900 text-white{% else %}bg-gray-200 text-gray-700 hover:bg-gray-300{% endif %}">Closed</a>
</div>

{% if issues %}
<div class="bg-white rounded-lg shadow overflow-hidden">
    <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
            <tr>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Title</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Severity</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Status</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Created</th>
            </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
            {% for issue in issues %}
            <tr>
                <td class="px-6 py-4">
                    <a href="/issues/{{ issue.id }}" class="text-blue-600 hover:underline">{{ issue.title }}</a>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                    <span class="px-2 py-1 text-xs rounded
                        {% if issue.severity == 'critical' %}bg-red-100 text-red-800
                        {% elif issue.severity == 'high' %}bg-orange-100 text-orange-800
                        {% elif issue.severity == 'medium' %}bg-yellow-100 text-yellow-800
                        {% else %}bg-gray-100 text-gray-800{% endif %}">
                        {{ issue.severity }}
                    </span>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                    {% with status=issue.status %}
                    {% include "components/status_badge.html" %}
                    {% endwith %}
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ issue.created_at }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<p class="text-gray-500">No issues found.</p>
{% endif %}
{% endblock %}
